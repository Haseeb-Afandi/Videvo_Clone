var I=(a,e,t)=>{if(!e.has(a))throw TypeError("Cannot "+t)};var l=(a,e,t)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,t)};var d=(a,e,t)=>(I(a,e,"access private method"),t);var c,m,s,p,n,A,y,v;class g{constructor(){l(this,c);l(this,s);l(this,n);l(this,y);this.BAR_SPACE=window.waveformHandler.BAR_SPACE,this.BAR_WIDTH=window.waveformHandler.BAR_WIDTH,d(this,y,v).call(this),d(this,c,m).call(this)}handleAudioPlayPause(e){let t=e.getAttribute("id");document.querySelectorAll(".audio-player").forEach(function(r){r.classList.remove("in-focus")}),e.closest(".audio-player").classList.add("in-focus"),e.paused?(d(this,s,p).call(this),d(this,n,A).call(this,t),e.play()):e.pause()}handleCanvasClick(e,t){let i=t;if(i.ended)var r=0,o=1;else var w=e.layerX,o=t.closest(".audio-player").querySelector("canvas").getBoundingClientRect().width,r=w;t.closest(".audio-player").querySelector(".blue-waveform-container").style.width=r+"px",i.currentTime=r/o*(isNaN(i.duration)?0:i.duration),d(this,s,p).call(this),this.handleAudioPlayPause(t)}}c=new WeakSet,m=function(){if(window.audioProgressInitiated)return;window.audioProgressInitiated=!0;let e=document.querySelectorAll("audio"),t=this;e.forEach(function(i,r){var o=i;o.ontimeupdate=function(){var f;var w=this.closest(".audio-player").querySelector("canvas").getBoundingClientRect().width/(t.BAR_SPACE+t.BAR_WIDTH)+1,S=w*o.currentTime/o.duration,h=this.closest(".audio-player").querySelector(".blue-waveform-container .overlay").getBoundingClientRect().width;let u=S*(t.BAR_SPACE+t.BAR_WIDTH)-h;(u<=h||isNaN(u))&&(u=h),this.closest(".audio-player").querySelector(".blue-waveform-container").style.width=u+"px",window.waveformHandler.drawWaveformItem(this.closest(".audio-player").querySelector("canvas"),this.closest(".audio-player").querySelector(".blue-waveform-container").getBoundingClientRect().width),o.paused||(this.closest(".audio-player").classList.add("inPlay"),d(f=t,n,A).call(f,i.id)),o.ended&&(this.closest(".audio-player").querySelector(".blue-waveform-container").style.width="100%")}})},s=new WeakSet,p=function(){document.querySelectorAll("audio").forEach(function(t){t.pause()})},n=new WeakSet,A=function(e){localStorage.getItem("playedAudio")||(localStorage.setItem("playedAudio","[]"),this.playedAudio=JSON.parse(localStorage.getItem("playedAudio"))),this.playedAudio.indexOf(e)==-1&&(this.playedAudio.push(e),localStorage.setItem("playedAudio",JSON.stringify(this.playedAudio)),document.getElementById(e).closest(".audio-row:not(.dp-audio)").classList.add("bg-gray-150"))},y=new WeakSet,v=function(){localStorage.getItem("playedAudio")||localStorage.setItem("playedAudio","[]"),this.playedAudio=JSON.parse(localStorage.getItem("playedAudio")),this.playedAudio.forEach(e=>{document.getElementById(e)!==null&&document.getElementById(e).closest(".audio-row").classList.add("bg-gray-150")})};setTimeout(()=>window.audioHandler=new g);window.addEventListener("contentChanged",a=>{setTimeout(function(){window.audioHandler&&(window.audioHandler={},window.audioProgressInitiated=void 0,window.audioHandler=new g)})});
